name: Auto Comment on PR
on:
  pull_request_target:
    types: [opened]
  pull_request:
    types: [opened]

jobs:
  comment:
    runs-on: ubuntu-latest
    # Remove any conditions that might skip the job
    steps:
      - name: Debug Event Info
        run: |
          echo "Event Name: ${{ github.event_name }}"
          echo "Action: ${{ github.event.action }}"
          echo "PR Number: ${{ github.event.number }}"
          echo "PR State: ${{ github.event.pull_request.state }}"
          echo "Head Repo: ${{ github.event.pull_request.head.repo.full_name }}"
          echo "Base Repo: ${{ github.repository }}"
          echo "Is Fork: ${{ github.event.pull_request.head.repo.fork }}"

      - name: Comment on PR
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            console.log('=== WORKFLOW DEBUG ===');
            console.log('Event:', context.eventName);
            console.log('Action:', context.payload.action);
            console.log('PR Number:', context.issue.number);
            console.log('Repository:', context.repo.owner + '/' + context.repo.repo);
            
            const prNumber = context.issue.number;
            const commentBody = `### Thanks for creating a PR for your Issue! ‚ò∫Ô∏è

            Kindly Star the repo ‚≠ê We'll review Your PR as soon as possible.
            In the meantime, please double-check the **file changes** and ensure that **all commits** are accurate.

            If there are any **unresolved review comments**, feel free to resolve them. ÔøΩüèº`;
            
            try {
              const result = await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: prNumber,
                body: commentBody
              });
              console.log('‚úÖ Comment added successfully!');
              console.log('Comment ID:', result.data.id);
            } catch (error) {
              console.error('‚ùå Failed to add comment:', error.message);
              console.error('Error details:', JSON.stringify(error.response?.data, null, 2));
              throw error;
            }
